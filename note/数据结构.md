* [红黑树](#红黑树)
    * [1 平衡树和非平衡树](#平衡树和非平衡树)
    * [2 旋转](#旋转)




-----------------------

# 红黑树
红黑树（Red-Black Tree，以下简称RBTree）的实际应用非常广泛，比如Linux内核中的完全公平调度器、高精度计时器、ext3文件系统等等，各种语言的函数库如Java的TreeMap和TreeSet.解决非平衡树问题的方法。主要讨论插入操作。

**自顶向下插入：**

在搜索例程沿着树向下查找插入点，在此进程中可能要对树的结构做一些改变。

## 平衡树和非平衡树
创建一颗只有一个节点的树，然后插入一系列升序或者降序的关键字。如下图
<div align="center"><img src="../pics//1547174373(1).png" width="400px"></div>
这些节点排在一条直线上，没有分支，所有的节点都在根的一侧，这棵树属于极端不平衡的情况。

### 时间复杂度降低到O(N)
当树没有分支的时候，就相当于一个链表。对于随机数据的实际数量来说，一颗特别不平衡的情况不太可能，因此部分非平衡树的时间介于O(N)和Olog(N)之间，这取决于树的不平衡程度。

### 红黑树的特征
- 节点都有颜色。
- 在插入和删除的过程中，要遵循保持这些颜色的不同排列规则。

**红-黑规则**

插入（删除）一个新节点都要遵循的规则：
- 每一个节点不是红色的就是黑色的；
- 根节点总是黑色的；
- 如果节点是红色的，则他的子节点必须是黑色的；
- 从根到叶节点(没有子节点)或空子节点的每条路径，都必须包含相同数目的黑色节点。

在从根到叶节点路径上黑色节点的数目称为 **黑色高度(black height)**。

### 修正违规的情况
假设看到颜色的规则被违犯了，有且只有下列2种的修正措施：
- 改变节点的颜色；
- 执行旋转操作

## 旋转
旋转必须做2件事：
- 使一些节点上升，一些节点下降，帮助树平衡；
- 保证不破坏二叉搜索树的特征；

选择则一个节点作为旋转的“顶端”。如果做一次右旋，这个顶端节点将会移动到它右子节点的位置，左子节点将会移动到它原来的位置（必须确保右旋必须有一个左子节点）。左旋类似。**旋转不会改变每颗子树中节点的相互关系**。

**推荐文章：**
- [漫画：什么是红黑树](https://juejin.im/post/5a27c6946fb9a04509096248#comment)
- [红黑树深入剖析及Java实现](https://zhuanlan.zhihu.com/p/24367771)
